# B Tree & B+ Tree

### B Tree

* B Tree란?

  B Tree는 일반적으로 B- Tree를 의미하며, Balanced Tree로 균형을 유지하는 트리임 \
  따라서 최악의 경우에도 시간 복잡도가 O(logN)임
  
  노드에는 2개 이상의 데이터(key)가 들어갈 수 있으며, 항상 정렬된 상태로 저장됨
  
  Binary Tree를 확장한 형태로 더 많은 자식을 가질 수 있음
  
  
* 사용하는 경우

  데이터베이스(인덱스), 파일 시스템
  
      대용량 데이터 처리 시, 하나의 노드에 많은 데이터를 가지면 큰 장점이 됨
      
      대용량 데이터는 메모리보다 블럭 단위로 입출력되는 하드디스크나 SSD에 저장되기 때문
      
      -> 한 블럭이 1024 바이트일 때, 2바이트를 읽으나 1024 바이트를 읽으나 동일한 입출력 비용(한 블럭)이 발생함
      
* 규칙

  하나의 노드에 여러개의 자료가 배치되는 트리구조임
  
  한 노드에 M개의 자료가 배치되면 M차 B Tree라고 함

  특정 노드의 자료수가 N이라면 자식 수는 N + 1이어야 함
  
  루트 노드는 적어도 2개 이상의 자식을 가짐
  
  루트 노드를 제외한 모든 노드는 M / 2개 이상의 자료를 가짐 \
  ex) 7차 B Tree인 경우 루트 노드를 제외한 모든 노드는 3개 이상의 자료를 가짐
  
  모든 리프 노드들은 같은 레벨에 존재함
  
  외부 노드로 가는 경로의 길이는 모두 같음
  
  입력 자료는 중복될 수 없음
  
* 장점

  삽입/삭제 후에도 균형 트리를 유지함
  
  균등한 탐색 속도를 보장함
  
  저장 장치의 효율성을 높임
  
* 단점

  노드 삽입/삭제 시 트리의 균형을 유지하기 위한 츄가 연산(재분배, 병합) 필요
  
  순차탐색 시 중위순회로 비효율적임

### B+ Tree

* B+ Tree란?

  B+ Tree는 B- Tree의 확장 개념으로 데이터의 빠른 접근을 위해 index 역할을 하는 비단말노드가 추가됨
  
  모든 데이터는 리프 노드에만 존재하며 모든 리프 노드는 연결리스트로 구성되어있음 \
  리프 노드를 B- Tree구조 + 연결리스트로 구현된 색인 구조로 구성하여 순차탐색 시 B- Tree보다 효율적임
  
  데이터의 삽입/삭제는 리프 노드에서만 발생함
  
### B Tree vs B+ Tree

  B Tree는 노드에 데이터가 저장됨
  
  B+ Tree는 index노드와 leaf노드로 분리되어 저장됨
  
  B Tree는 각 노드에 key와 data가 모두 들어갈 수 있으며 data는 disk block으로 포인터가 될 수 있음
  
  B+ Tree는 각 노드에 key만 들어가며 data는 모두 leaf 노드에만 존재함