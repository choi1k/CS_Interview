# 시스템 호출(System Call, 시스템 콜)

### System Call
  
  * System Call이란?
  
    OS는 다양한 서비스를 수행하기 위해 하드웨어를 직접 관리하지만 응용 프로그램은 OS가 제공하는 인터페이스를 통해서만 자원을 사용할 수 있음\
    OS가 제공하는 이러한 인터페이스를 시스템 콜이라고 함
    
    시스템 콜은 커널 영역의 기능을 사용자 모드일 때 사용 가능하게 함\
    (= 프로세스가 하드웨어에 직접 접근해 필요한 기능을 할 수 있게 해줌, 응용프로그램은 시스템 콜을 이용해 원하는 기능을 수행)
    
  * 커널(Kernel)
  
    운영체제 중 항상 필요한 부분은 전원이 켜짐과 동시에 메모리에 올려놓고 그렇지 않은 부분은 필요할 때 메모리에 올려놓게 됨\
    이때, 메모리에 상주하는 운영체제의 부분을 커널이라고 함
    따라서 커널은 운영체제의 핵심적인 부분으로써 보통 운영체제라 하면 커널을 뜻함
    
  * CPU 모드
  
    CPU는 사용자 애플리케이션이 시스템을 손상시키는 것을 방지하기 위해 2가지 모드를 제공함\
    CPU에 있는 Mode bit로 모드를 구분하며 0은 커널모드, 1은 사용자모드로 나뉘어 구동됨
    
    * 커널 모드

      운영체제가 CPU를 사용하는 모드\
      시스템 콜을 통해 커널 모드로 전환이 되면 운영체제는 하드웨어를 제어하는 명령어를 실행함
      
    * 사용자 모드
    
      사용자 애플리케이션 코드가 실행되는 모드\
      사용자가 접근할 수 있는 영역에 제한이 있기 때문에 디스크, I/O와 같은 하드웨어에 접근하기 위해서는 시스템 콜을 사용해야 함
    
 * 시스템 콜 종류
 
   * 프로세스 제어
     
         fork()와 exec() 모두 한 프로세스가 다른 프로세를 실행시키기 위해 사용하는 시스템 호출
       
         fork() : 새로운 프로세스를 위한 메모리를 할당하고 fork()를 호출한 프로세스를 새로운 공간으로 모두 복사함
                  새로 생성된 프로세스는 pid는 다르지만 기존의 프로세스와 동일한 코드를 가짐
                  
         exec() : fork()와 달리 새로운 프로세스를 위한 메모리를 할당하지 않고 exec()를 호출한 프로세스의 메모리에 새로운 프로세스의
                  코드를 덮어씌움
                  결과 프로세스가 하나 더 생기는 fork()와 달리 exec()를 호출한 프로세스의 pid가 새로운 프로세스에 적용됨
                  
          -> fork는 복사해서 프로세스를 하나 더 만들고 exec는 하나 더 만든 프로세스를 자기 자신 위에 덮어쓰는 것
          
          wait() : 자식 프로세스가 끝날 때까지 대기
          
    * 파일 조작
      
      open(), read(), write() 등
          
    * 장치 관리
      
      장치의 부착, 분리 등
    
    * 정보 유지
    
      시간, 날짜 설정 등
      
    * 통신
    
      공유 메모리에서 다른 프로세스 소유 메모리 접근 시