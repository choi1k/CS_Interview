# 프로세스 & 스레드
>프로세스: 프로그램을 메모리 상에서 실행중인 작업
스레드: 프로세스 안에서 실행되는 여러 흐름 단위

<br>

기본적으로 프로세스마다 최소 1개의 스레드 소유 (메인 스레드 포함)

<br>

- 프로세스 정의
  - 프로그램이 실행되는 상태
  - 하나의 프로그램에서 여러 개의 프로세스 생성 가능
  - 프로세스는 코드, 스택, 자료로 구성
  - 프로세스는 PCB(Process Control Block)로 대표
  - 작업의 단위로서의 프로세스  
  
<br>

- 프로세스의 상태
  - 프로세스는 실행되면서 자신의 상태(state)가 변함
  - 5가지 상태 - 신규, 준비, 실행, 대기, 종료
    - 신규 new - 프로세스가 생성 중
    - 준비 ready - 프로세스가 설정되어 대기 중
    - 실행 running - 프로세스가 실행하는 중
    - 대기 waiting - 프로세스가 이벤트 발생을 대기 중
    - 종료 terminated - 프로세스가 실행을 종료
  

<br>

- 프로그램과 달리, 프로세스는 메모리에 주소 공간을 갖는 능동적인 개체 (독립적)

  - 텍스트(코드): 프로세스가 실행하는 코드 저장. 코드 자체를 구성하는 메모리 영역(프로그램 명령))
  - 데이터(정적 변수): 프로세스 실행 중에 할당받는 영역. 전역변수, 정적변수, 배열 등
  - 실행 스택(Stack): 호출된 프로시저(함수)의 복귀 주소와 지역 변수 등의 일시적인 데이터를 저장하는 영역. 지역변수, 매개변수, 리턴 값(임시 메모리 영역) 
  - 실행 힙(Heap): 텍스트(코드) 영역과는 별도로 유지되는 자유 영역. 동적 할당 시 사용(new(), malloc() 등)

스레드는 스택만 따로 할당받고 나머지 영역은 서로 공유

하나의 프로세스가 생성될 떄, 기본적으로 하나의 스레드 같이 생성

프로세스는 자신만의 고유 공간과 자원을 할당받아 사용하는데 반해, 스레드는 다른 스레드와 공간, 자원을 공유하면서 사용하는 차이 존재


## 멀티프로세스
> 하나의 프로그램을 여러 개의 프로세스로 구성하여 각 프로세스가 병렬적으로 작업을 수행하는 것

장점: 안전성(메모리 침범 문제를 OS 차원에서 해결)
단점: 각각 독립된 메모리 영역을 갖고 있어, 작업량 많을 수록 오버헤드 발생. Context Switching으로 인한 성능 저하

## 멀티 스레드
> 하나의 응용 프로그램에서 여러 스레드를 구성해 각 스레드가 하나의 작업을 처리하는 것

스레드들이 공유 메모리를 통해 다수의 작업을 동시에 처리하도록 해줌

장점: 독립적인 프로세스에 비해 공유 메모리만큼의 시간, 자원 손실이 감소 전역 변수와 정적 변수에 대한 자료 공유 가능

단점 : 안전성 문제. 하나의 스레드가 데이터 공간 망가뜨리면, 모든 스레드가 작동 불능 상태 (공유 메모리를 갖기 때문)

- 멀티스레드의 안전성에 대한 단점은 Critical Section 기법을 통해 대비함.

