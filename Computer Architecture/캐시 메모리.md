# 캐시 메모리(Cache Memory)
캐시 메모리는처리 속도가 다른 두 장치간의 속도차에 따른 병목 현상을 줄이기 위한 범용 메모리임

RAM에서 데이터를 인출해오는 속도가 CPU가 task를 처리하는 속도보다 느리기 때문에 시간이 낭비되지만,\
중간에 위치한 캐시 메모리가 둘 사이에서 데이터를 고속으로 전달해줌으로써 속도 차이로 인한 병목을 어느정도 해결해 줌

CPU가 주기억장치에 저장된 데이터를 읽어올 때, 자주 사용하는 데이터를 캐시 메모리에 저장해둠

이후 태스크 수행 시 주기억장치가 아닌 캐시 메모리에서 데이터를 먼저 가져옴으로써 속도를 향상시킴

빠른 속도가 장점이지만, 용량이 적고 비용이 비쌈

CPU에는 L1, L2, L3 캐시 메모리가 사용됨 (L = Level)

속도와 크기에 따라 분류되며 일반적으로 L1부터 접근하고 원하는 데이터를 얻지 못하면 L2로 가게 됨

### 캐시 메모리의 지역성(Cache Locality)

지역성 : 시/공간적으로 가까운 데이터의 접근이 다른 데이터보다 접근이 원활하게 일어나는 특성

해당 특성으로 적중률을 최대화하여 효율적 동작을 가능하게 함

  * 공간 지역성 : 배열과 같은 구조 내에서 최근 사용했던 데이터와 메모리 주소상 인접한 데이터가 잠시후 참조될 가능성이 높다는 특성
  
  * 시간 지역성 : for나 while과 같은 반복문에 사용된 변수와 같이 최근 사용된 데이터는 잠시후 또 다시 참조될 가능성이 높다는 특성
  
  이와 같은 특성으로 인해 캐시에 데이터를 저장할 때는 해당 데이터 외에도 옆 주소의 데이터도 함께 가져와 추후 사용에 대해 대비함
  
### 캐싱 라인(Caching Line)

캐시가 메모리에서 CPU로 데이터를 빠르게 전달해도 캐시 내부에서 데이터를 찾을 때 오랜 시간이 걸린다면 캐시의 효과를 기대할 수 없음

따라서 캐시는 데이터를 쉽게 검색하기 위해 사용되는 데이터의 주소를 기록해둔 태그를 만듦

이러한 태그들을 하나로 묶은 자료구조를 캐싱 라인이라고 함

  * 직접 매핑(Direct Mapping)
  
    메인 메모리를 일정한 블록으로 나눠 각각의 블록을 캐시의 정해진 영역에 매핑하는 방식
    
    구현이 가장 쉽다는 장점이 있지만,
    캐시 적중률이 낮아질 수 있고 하나의 캐시 메모리에서 참조하는 데이터가 둘 이상이 될 수 있어 충돌 발생 가능성이 존재함
    
  * 완전 연관 매핑(Fully Associative Mapping)
  
    캐시 메모리의 빈 공간에 마음대로 주소를 매핑하는 방식
    
    간단하지만 캐시 메모리에서 데이터를 꺼내올 때 모든 데이터를 순회하는 병렬 검색이 진행됨
    
    이를 해결하기 위해 CAM(Content-Addressable Memory)이라는 특수한 형태의 메모리가 추가로 필요해 비용이 비쌈
    
  * 집합 연관 매핑(Set AssociativeMapping)
  
    직접 매핑 + 연관 매핑의 방식
    
    캐시 메모리의 빈 공간에 마음대로 주소를 저장하되, 미리 정해둔 특정 여역에만 저장하는 방식
    
    직접 매핑에 비해 검색은 느리지만 저장이 빠르고,
    완전 연관 매핑에 비해 검색은 빠르지만 저장이 느려 편향되지 않은 성능을 보장함
    
### 캐시 미스
  
  CPU가 요청한 데이터가 캐시에 있으면 Cache Hit, 없어서 DRAM에서 가져오면 Cache Miss
  
  * Cold Start Miss : 데이터에 처음 접근해 캐시에 해당 데이터를 새롭게 올릴 때 발생하는 미스
  
  * Conflict Miss : Direct map 이나 Set Associative 방식에서 같은 부분을 번갈아 가면서 사용하게 되어 발생하는 미스
  
  * Capacity Miss : 캐시의 용량이 부족해 발생하는 미스